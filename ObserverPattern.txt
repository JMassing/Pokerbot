https://www.drdobbs.com/cpp/generalizing-observer/184403873?pgno=3